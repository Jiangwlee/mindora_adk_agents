<!--
Copyright 2025 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<div class="chatbot-container">
  <!-- Toolbar -->
  <mat-toolbar class="app-toolbar" color="primary">
    <button mat-icon-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="toolbar-content">
      <div class="app-info">
        <h2 class="app-title">{{ appDisplayName || appName }}</h2>
        <p class="app-description">{{ appDescription }}</p>
      </div>
      <div class="toolbar-actions">
        <button mat-icon-button (click)="goToHome()" matTooltip="返回主页">
          <mat-icon>home</mat-icon>
        </button>
      </div>
    </div>
  </mat-toolbar>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="60"></mat-spinner>
    <p>加载应用中...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-container">
    <mat-icon class="error-icon">error</mat-icon>
    <h3>加载失败</h3>
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" (click)="goBack()">
      返回主页
    </button>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading && !error" class="main-content">
    <!-- App Header -->
    <div class="app-header">
      <mat-card class="info-card">
        <div class="info-content">
          <div class="info-section">
            <h3>应用信息</h3>
            <div class="info-item">
              <mat-icon>apps</mat-icon>
              <span>类型: Chatbot</span>
            </div>
            <div class="info-item">
              <mat-icon>category</mat-icon>
              <span>布局: 聊天界面</span>
            </div>
            <div class="info-item">
              <mat-icon>palette</mat-icon>
              <span>主题: 现代风格</span>
            </div>
          </div>

          <div class="info-section">
            <h3>功能特性</h3>
            <div class="features-list">
              <div class="feature-item" *ngIf="hasFeature('voice')">
                <mat-icon class="feature-enabled">mic</mat-icon>
                <span>{{ getFeatureLabel('voice') }}</span>
              </div>
              <div class="feature-item" *ngIf="hasFeature('file_upload')">
                <mat-icon class="feature-enabled">upload_file</mat-icon>
                <span>{{ getFeatureLabel('file_upload') }}</span>
              </div>
              <div class="feature-item" *ngIf="hasFeature('code_execution')">
                <mat-icon class="feature-enabled">code</mat-icon>
                <span>{{ getFeatureLabel('code_execution') }}</span>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>能力范围</h3>
            <div class="capabilities">
              <span class="capability-tag" *ngFor="let capability of appData?.capabilities">
                {{ capability }}
              </span>
            </div>
          </div>
        </div>
      </mat-card>
    </div>

    <!-- Chat Interface Placeholder -->
    <div class="chat-placeholder">
      <mat-card class="placeholder-card">
        <div class="placeholder-content">
          <mat-icon class="chat-icon">chat</mat-icon>
          <h3>聊天界面</h3>
          <p>这里是 {{ appDisplayName }} 的聊天界面</p>
          <p class="placeholder-description">
            聊天功能正在开发中，将提供统一的对话体验，支持多模态交互（文本、音频、视频、文件）。
          </p>
          <div class="placeholder-features">
            <div class="placeholder-feature">
              <mat-icon>text_format</mat-icon>
              <span>文本对话</span>
            </div>
            <div class="placeholder-feature">
              <mat-icon>mic</mat-icon>
              <span>语音交互</span>
            </div>
            <div class="placeholder-feature">
              <mat-icon>attach_file</mat-icon>
              <span>文件上传</span>
            </div>
          </div>
        </div>
      </mat-card>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-item">
        <mat-icon class="status-icon">info</mat-icon>
        <span>应用名称: {{ appName }}</span>
      </div>
      <div class="status-item">
        <mat-icon class="status-icon">build</mat-icon>
        <span>状态: 开发中</span>
      </div>
    </div>
  </div>
</div>